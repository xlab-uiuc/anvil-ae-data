running rabbitmq-controller in crash-testing mode
starting controller
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"RabbitmqCluster","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"rabbitmq\"},\"spec\":{\"image\":\"rabbitmq:3.11.10-management\",\"persistence\":{\"storage\":\"10Gi\",\"storageClassName\":null},\"rabbitmqConfig\":{\"additionalConfig\":\"log.console.level = debug\\n\"},\"replicas\":3}}\n"},"creationTimestamp":"2023-11-20T06:36:04Z","generation":1,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:image":{},"f:labels":{},"f:persistence":{".":{},"f:storage":{},"f:storageClassName":{}},"f:podManagementPolicy":{},"f:rabbitmqConfig":{".":{},"f:additionalConfig":{}},"f:replicas":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-11-20T06:36:04Z"}],"name":"test-cluster","namespace":"rabbitmq","resourceVersion":"734","uid":"6361f75b-2a54-4cdb-b042-f2064c3932cd"},"spec":{"replicas":3,"image":"rabbitmq:3.11.10-management","persistence":{"storageClassName":"standard","storage":"10Gi"},"rabbitmqConfig":{"additionalConfig":"log.console.level = debug\n","advancedConfig":null,"envConfig":null},"affinity":null,"tolerations":null,"labels":{},"annotations":{},"resources":null,"podManagementPolicy":"Parallel","persistentVolumeClaimRetentionPolicy":null}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Service/rabbitmq/test-cluster-nodes done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Service/rabbitmq/test-cluster-nodes done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"16","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:04Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"989","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Service/rabbitmq/test-cluster-client done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Service/rabbitmq/test-cluster-client done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"17","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"998","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Secret/rabbitmq/test-cluster-erlang-cookie done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Secret/rabbitmq/test-cluster-erlang-cookie done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"18","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"999","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Secret/rabbitmq/test-cluster-default-user done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Secret/rabbitmq/test-cluster-default-user done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"19","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1000","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ConfigMap/rabbitmq/test-cluster-plugins-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ConfigMap/rabbitmq/test-cluster-plugins-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"20","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1001","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ConfigMap/rabbitmq/test-cluster-server-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ConfigMap/rabbitmq/test-cluster-server-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"21","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1002","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ServiceAccount/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ServiceAccount/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"22","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1003","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Role/rabbitmq/test-cluster-peer-discovery done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Role/rabbitmq/test-cluster-peer-discovery done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"23","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1004","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get RoleBinding/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update RoleBinding/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"24","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1005","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get StatefulSet/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update StatefulSet/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"25","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:35:08Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:36:02Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:37:05Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1006","uid":"a56b56f7-a4a1-47cd-b2d1-5f2f36ad2107"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: done
reconciled (ObjectRef { dyntype: (), name: "test-cluster", namespace: Some("rabbitmq"), extra: Extra { resource_version: Some("734"), uid: Some("6361f75b-2a54-4cdb-b042-f2064c3932cd") } }, Action { requeue_after: Some(60s) })

