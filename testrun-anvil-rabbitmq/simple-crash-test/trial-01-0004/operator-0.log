running rabbitmq-controller in crash-testing mode
starting controller
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"RabbitmqCluster","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"rabbitmq\"},\"spec\":{\"image\":\"rabbitmq:3.11.10-management\",\"persistence\":{\"storage\":\"10Gi\",\"storageClassName\":null},\"rabbitmqConfig\":{\"additionalConfig\":\"log.console.level = debug\\n\"},\"replicas\":3}}\n"},"creationTimestamp":"2023-11-20T06:03:53Z","generation":1,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:image":{},"f:labels":{},"f:persistence":{".":{},"f:storage":{},"f:storageClassName":{}},"f:podManagementPolicy":{},"f:rabbitmqConfig":{".":{},"f:additionalConfig":{}},"f:replicas":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-11-20T06:03:53Z"}],"name":"test-cluster","namespace":"rabbitmq","resourceVersion":"752","uid":"f5a611dd-15ff-48b0-9feb-be311e390956"},"spec":{"replicas":3,"image":"rabbitmq:3.11.10-management","persistence":{"storageClassName":"standard","storage":"10Gi"},"rabbitmqConfig":{"additionalConfig":"log.console.level = debug\n","advancedConfig":null,"envConfig":null},"affinity":null,"tolerations":null,"labels":{},"annotations":{},"resources":null,"podManagementPolicy":"Parallel","persistentVolumeClaimRetentionPolicy":null}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Service/rabbitmq/test-cluster-nodes done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Service/rabbitmq/test-cluster-nodes done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"16","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:54Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1006","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Service/rabbitmq/test-cluster-client done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Service/rabbitmq/test-cluster-client done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"17","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1014","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Secret/rabbitmq/test-cluster-erlang-cookie done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Secret/rabbitmq/test-cluster-erlang-cookie done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"18","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1015","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Secret/rabbitmq/test-cluster-default-user done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Secret/rabbitmq/test-cluster-default-user done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"19","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1016","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ConfigMap/rabbitmq/test-cluster-plugins-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ConfigMap/rabbitmq/test-cluster-plugins-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"20","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1017","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ConfigMap/rabbitmq/test-cluster-server-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ConfigMap/rabbitmq/test-cluster-server-conf done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"21","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1018","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get ServiceAccount/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update ServiceAccount/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"22","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1019","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get Role/rabbitmq/test-cluster-peer-discovery done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update Role/rabbitmq/test-cluster-peer-discovery done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"23","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1020","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get RoleBinding/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update RoleBinding/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"24","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1021","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get StatefulSet/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Update StatefulSet/rabbitmq/test-cluster-server done
Reconciling RabbitmqCluster/rabbitmq/test-cluster: Get fault-injection-config: {"apiVersion":"v1","kind":"ConfigMap","data":{"cr_key":"RabbitmqCluster/rabbitmq/test-cluster","current":"25","expected":"15"},"metadata":{"creationTimestamp":"2023-11-20T06:02:57Z","managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:cr_key":{},"f:expected":{}}},"manager":"OpenAPI-Generator","operation":"Update","time":"2023-11-20T06:03:51Z"},{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{"f:current":{}}},"manager":"unknown","operation":"Update","time":"2023-11-20T06:04:55Z"}],"name":"fault-injection-config","namespace":"default","resourceVersion":"1022","uid":"7ca704f2-8726-4c06-bd51-3af46b66cfcc"}}
Reconciling RabbitmqCluster/rabbitmq/test-cluster: done
reconciled (ObjectRef { dyntype: (), name: "test-cluster", namespace: Some("rabbitmq"), extra: Extra { resource_version: Some("752"), uid: Some("f5a611dd-15ff-48b0-9feb-be311e390956") } }, Action { requeue_after: Some(60s) })

