Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Update RoleBinding/fluent/test-cluster-role-binding done
Reconciling FluentBit/fluent/test-cluster: Get Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update Service/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get DaemonSet/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update DaemonSet/fluent/test-cluster failed with error: ApiError: DaemonSet.apps "test-cluster" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: "1": must be less than or equal to cpu limit]: Invalid (ErrorResponse { status: "Failure", message: "DaemonSet.apps \"test-cluster\" is invalid: [spec.template.spec.initContainers[0].image: Required value, spec.template.spec.initContainers[0].resources.requests: Invalid value: \"1\": must be less than or equal to cpu limit]", reason: "Invalid", code: 422 })
Reconciling FluentBit/fluent/test-cluster: error
reconcile failed: reconciler for object FluentBit.v1.anvil.dev/test-cluster.fluent failed
Reconciling FluentBitConfig/fluent/fluent-bit-config: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBitConfig","metadata":{"creationTimestamp":"2023-12-01T22:50:20Z","generation":1,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:fluentBitConfig":{},"f:parsersConfig":{}}},"manager":"kubectl","operation":"Apply","time":"2023-12-01T22:50:20Z"}],"name":"fluent-bit-config","namespace":"fluent","resourceVersion":"644","uid":"ec3fbc84-cc5a-4322-a503-cd1f654b5497"},"spec":{"fluentBitConfig":"[Service]\n    Parsers_File    parsers.conf\n[Input]\n    Name    tail\n    Path    /var/log/containers/*.log\n    Exclude_Path    /var/log/containers/utils_default_utils-*.log\n    Refresh_Interval    10\n    Skip_Long_Lines    true\n    DB    /fluent-bit/tail/pos.db\n    DB.Sync    Normal\n    Mem_Buf_Limit    5MB\n    Parser    docker\n    Tag    kube.*\n[Filter]\n    Name    kubernetes\n    Match    kube.*\n    Kube_URL    https://kubernetes.default.svc:443\n    Kube_CA_File    /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n    Kube_Token_File    /var/run/secrets/kubernetes.io/serviceaccount/token\n    Labels    false\n    Annotations    false\n[Filter]\n    Name    nest\n    Match    kube.*\n    Operation    lift\n    Nested_under    kubernetes\n    Add_prefix    kubernetes_\n[Filter]\n    Name    modify\n    Match    kube.*\n    Remove    stream\n    Remove    kubernetes_pod_id\n    Remove    kubernetes_host\n    Remove    kubernetes_container_hash\n[Filter]\n    Name    nest\n    Match    kube.*\n    Operation    nest\n    Wildcard    kubernetes_*\n    Nest_under    kubernetes\n    Remove_prefix    kubernetes_\n[Output]\n    Name    kafka\n    Match_Regex    (?:kube|service)\\.(.*)\n    Brokers    my-cluster-kafka-brokers.kafka.svc:9092\n    Topics    fluent-log\n","parsersConfig":""}}
Reconciling FluentBitConfig/fluent/fluent-bit-config: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBitConfig/fluent/fluent-bit-config: Update Secret/fluent/fluent-bit-config done
Reconciling FluentBitConfig/fluent/fluent-bit-config: done
reconciled (ObjectRef { dyntype: (), name: "fluent-bit-config", namespace: Some("fluent"), extra: Extra { resource_version: Some("644"), uid: Some("ec3fbc84-cc5a-4322-a503-cd1f654b5497") } }, Action { requeue_after: Some(60s) })
Reconciling FluentBit/fluent/test-cluster: Get cr {"apiVersion":"anvil.dev/v1","kind":"FluentBit","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"anvil.dev/v1\",\"kind\":\"FluentBit\",\"metadata\":{\"annotations\":{},\"name\":\"test-cluster\",\"namespace\":\"fluent\"},\"spec\":{\"fluentBitConfigName\":\"fluent-bit-config\",\"image\":\"kubesphere/fluent-bit:v2.1.7\",\"initContainers\":[{\"name\":\"g\",\"resources\":{\"limits\":{\"cpu\":\"800m\",\"memory\":\"1000m\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000m\"}}}],\"securityContext\":{\"fsGroup\":1000,\"runAsGroup\":1000,\"runAsUser\":1000,\"supplementalGroups\":[1000]},\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"Exists\",\"tolerationSeconds\":3600}]}}\n"},"creationTimestamp":"2023-12-01T22:50:50Z","generation":9,"managedFields":[{"apiVersion":"anvil.dev/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:annotations":{},"f:disableLogVolumes":{},"f:fluentBitConfigName":{},"f:image":{},"f:initContainers":{},"f:labels":{},"f:nodeSelector":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{},"f:supplementalGroups":{}},"f:serviceAccountAnnotations":{},"f:serviceAnnotations":{},"f:serviceLabels":{},"f:tolerations":{}}},"manager":"kubectl-client-side-apply","operation":"Update","time":"2023-12-01T22:59:35Z"}],"name":"test-cluster","namespace":"fluent","resourceVersion":"2024","uid":"53be2b91-b501-4328-8b0a-537363891fe8"},"spec":{"fluentBitConfigName":"fluent-bit-config","image":"kubesphere/fluent-bit:v2.1.7","args":null,"command":null,"imagePullPolicy":null,"imagePullSecrets":null,"resources":null,"tolerations":[{"effect":"NoExecute","key":"node-role.kubernetes.io/control-plane","operator":"Exists","tolerationSeconds":3600}],"labels":{},"annotations":{},"serviceAccountAnnotations":{},"serviceLabels":{},"serviceSelector":null,"serviceAnnotations":{},"affinity":null,"disableLogVolumes":false,"nodeSelector":{},"runtimeClassName":null,"dnsPolicy":null,"priorityClassName":null,"volumes":null,"volumeMounts":null,"schedulerName":null,"metricsPort":null,"internalMountPropagation":null,"positionDB":null,"containerLogRealPath":null,"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsUser":1000,"supplementalGroups":[1000]},"containerSecurityContext":null,"hostNetwork":null,"envVars":null,"livenessProbe":null,"readinessProbe":null,"initContainers":[{"name":"g","resources":{"limits":{"cpu":"800m","memory":"1000m"},"requests":{"cpu":"1000m","memory":"1000m"}}}],"ports":null}}
Reconciling FluentBit/fluent/test-cluster: Get Secret/fluent/fluent-bit-config done
Reconciling FluentBit/fluent/test-cluster: Get ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Update ServiceAccount/fluent/test-cluster done
Reconciling FluentBit/fluent/test-cluster: Get Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Update Role/fluent/test-cluster-role done
Reconciling FluentBit/fluent/test-cluster: Get RoleBinding/fluent/test-cluster-role-binding done

